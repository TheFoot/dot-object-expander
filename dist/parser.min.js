var dotObjectParser=function(){"use strict";function t(t,r){var e,i;if("function"==typeof r)void 0!==(i=r(t))&&(t=i);else if(Array.isArray(r))for(e=0;e<r.length;e++)void 0!==(i=r[e](t))&&(t=i);return t}function r(t,r){return"-"===t[0]&&Array.isArray(r)&&/^-\d+$/.test(t)?r.length+parseInt(t,10):t}function e(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t){return Object(t)===t}function n(t){return 0===Object.keys(t).length}var o=["__proto__","prototype","constructor"],s=function(t){return-1===o.indexOf(t)};function a(t,r){t.indexOf("[")>=0&&(t=t.replace(/\[/g,r).replace(/]/g,""));var e=t.split(r);if(e.filter(s).length!==e.length)throw Error("Refusing to update blacklisted property "+t);return e}var c=Object.prototype.hasOwnProperty;function p(t,r,e,i){if(!(this instanceof p))return new p(t,r,e,i);void 0===r&&(r=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),this.separator=t||".",this.override=r,this.useArray=e,this.useBrackets=i,this.keepArray=!1,this.cleanup=[]}var f=new p(".",!1,!0,!0);function u(t){return function(){return f[t].apply(f,arguments)}}p.prototype._fill=function(r,e,o,s){var a=r.shift();if(r.length>0){if(e[a]=e[a]||(this.useArray&&function(t){return/^\d+$/.test(t)}(r[0])?[]:{}),!i(e[a])){if(!this.override){if(!i(o)||!n(o))throw new Error("Trying to redefine `"+a+"` which is a "+typeof e[a]);return}e[a]={}}this._fill(r,e[a],o,s)}else{if(!this.override&&i(e[a])&&!n(e[a])){if(!i(o)||!n(o))throw new Error("Trying to redefine non-empty obj['"+a+"']");return}e[a]=t(o,s)}},p.prototype.object=function(r,e){var i=this;return Object.keys(r).forEach((function(n){var o=void 0===e?null:e[n],s=a(n,i.separator).join(i.separator);-1!==s.indexOf(i.separator)?(i._fill(s.split(i.separator),r,r[n],o),delete r[n]):r[n]=t(r[n],o)})),r},p.prototype.str=function(r,e,i,n){var o=a(r,this.separator).join(this.separator);return-1!==r.indexOf(this.separator)?this._fill(o.split(this.separator),i,e,n):i[r]=t(e,n),i},p.prototype.pick=function(t,e,i,n){var o,s,c,p,f;for(s=a(t,this.separator),o=0;o<s.length;o++){if(p=r(s[o],e),!e||"object"!=typeof e||!(p in e))return;if(o===s.length-1)return i?(c=e[p],n&&Array.isArray(e)?e.splice(p,1):delete e[p],Array.isArray(e)&&(f=s.slice(0,-1).join("."),-1===this.cleanup.indexOf(f)&&this.cleanup.push(f)),c):e[p];e=e[p]}return i&&Array.isArray(e)&&(e=e.filter((function(t){return void 0!==t}))),e},p.prototype.delete=function(t,r){return this.remove(t,r,!0)},p.prototype.remove=function(t,r,e){var i;if(this.cleanup=[],Array.isArray(t)){for(i=0;i<t.length;i++)this.pick(t[i],r,!0,e);return e||this._cleanup(r),r}return this.pick(t,r,!0,e)},p.prototype._cleanup=function(t){var r,e,i,n;if(this.cleanup.length){for(e=0;e<this.cleanup.length;e++)r=(r=(n=(i=this.cleanup[e].split(".")).splice(0,-1).join("."))?this.pick(n,t):t)[i[0]].filter((function(t){return void 0!==t})),this.set(this.cleanup[e],r,t);this.cleanup=[]}},p.prototype.del=p.prototype.remove,p.prototype.move=function(r,e,i,n,o){return"function"==typeof n||Array.isArray(n)?this.set(e,t(this.pick(r,i,!0),n),i,o):(o=n,this.set(e,this.pick(r,i,!0),i,o)),i},p.prototype.transfer=function(r,e,i,n,o,s){return"function"==typeof o||Array.isArray(o)?this.set(e,t(this.pick(r,i,!0),o),n,s):(s=o,this.set(e,this.pick(r,i,!0),n,s)),n},p.prototype.copy=function(r,e,i,n,o,s){return"function"==typeof o||Array.isArray(o)?this.set(e,t(JSON.parse(JSON.stringify(this.pick(r,i,!1))),o),n,s):(s=o,this.set(e,this.pick(r,i,!1),n,s)),n},p.prototype.set=function(t,r,i,n){var o,s,p,f;if(void 0===r)return i;for(p=a(t,this.separator),o=0;o<p.length;o++){if(f=p[o],o===p.length-1)if(n&&e(r)&&e(i[f]))for(s in r)c.call(r,s)&&(i[f][s]=r[s]);else if(n&&Array.isArray(i[f])&&Array.isArray(r))for(var u=0;u<r.length;u++)i[p[o]].push(r[u]);else i[f]=r;else c.call(i,f)&&(e(i[f])||Array.isArray(i[f]))||(/^\d+$/.test(p[o+1])?i[f]=[]:i[f]={});i=i[f]}return i},p.prototype.transform=function(t,r,e){return r=r||{},e=e||{},Object.keys(t).forEach(function(i){this.set(t[i],this.pick(i,r),e)}.bind(this)),e},p.prototype.dot=function(t,r,o){r=r||{},o=o||[];var s=Array.isArray(t);return Object.keys(t).forEach(function(a){var c=s&&this.useBrackets?"["+a+"]":a;if(i(t[a])&&(e(t[a])&&!n(t[a])||Array.isArray(t[a])&&!this.keepArray&&0!==t[a].length)){if(s&&this.useBrackets){var p=o[o.length-1]||"";return this.dot(t[a],r,o.slice(0,-1).concat(p+c))}return this.dot(t[a],r,o.concat(c))}s&&this.useBrackets?r[o.join(this.separator).concat("["+a+"]")]=t[a]:r[o.concat(c).join(this.separator)]=t[a]}.bind(this)),r},p.pick=u("pick"),p.move=u("move"),p.transfer=u("transfer"),p.transform=u("transform"),p.copy=u("copy"),p.object=u("object"),p.str=u("str"),p.set=u("set"),p.delete=u("delete"),p.del=p.remove=u("remove"),p.dot=u("dot"),["override","overwrite"].forEach((function(t){Object.defineProperty(p,t,{get:function(){return f.override},set:function(t){f.override=!!t}})})),["useArray","keepArray","useBrackets"].forEach((function(t){Object.defineProperty(p,t,{get:function(){return f[t]},set:function(r){f[t]=r}})})),p._process=t;var h=p;const y=t=>{if([void 0,null].includes(t))return t;let r;try{r=JSON.parse(JSON.stringify(t))}catch(t){throw new Error("Cannot parse object with circular reference")}try{r=h.object(r)}catch(t){throw new Error("dotObject threw a parsing error: "+t.message)}for(const[t,e]of Object.entries(r))"object"==typeof e&&(r[t]=y(e));return r};return t=>y(t)}();
//# sourceMappingURL=parser.min.js.map
